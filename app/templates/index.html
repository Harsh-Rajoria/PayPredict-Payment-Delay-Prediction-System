<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>PayPredict</title>
  <link rel="stylesheet" href="../static/style.css">
</head>
<body>
  <h2>ðŸ’¼ PayPredict â€” Payment Delay Prediction</h2>

  <section>
    <h3>Predict from JSON</h3>
    <textarea id="jsonInput" rows="8" cols="80">
{"LIMIT_BAL":20000,"SEX":1,"EDUCATION":2,"MARRIAGE":1,"AGE":30,"PAY_0":0,"PAY_2":0,"PAY_3":0,"PAY_4":0,"PAY_5":0,"PAY_6":0,"BILL_AMT1":1000,"BILL_AMT2":1200,"BILL_AMT3":1100,"BILL_AMT4":900,"BILL_AMT5":0,"BILL_AMT6":500,"PAY_AMT1":1000,"PAY_AMT2":1200,"PAY_AMT3":1100,"PAY_AMT4":900,"PAY_AMT5":0,"PAY_AMT6":500}
    </textarea><br>
    <button onclick="predictJSON()">Predict</button>
    <pre id="jsonResult">Result will appear here...</pre>
  </section>

  <section>
    <h3>Predict from CSV</h3>
    <input type="file" id="csvfile">
    <button onclick="predictFile()">Upload & Predict</button>
    <pre id="fileResult">No file uploaded yet</pre>
  </section>

<script>
async function predictJSON(){
  const data = document.getElementById("jsonInput").value;
  const resp = await fetch("/predict", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: data
  });
  const res = await resp.json();
  document.getElementById("jsonResult").textContent = JSON.stringify(res, null, 2);
}
async function predictFile(){
  const f = document.getElementById("csvfile").files[0];
  const fd = new FormData();
  fd.append("file", f);
  const resp = await fetch("/predict_file", {method:"POST", body:fd});
  const res = await resp.json();
  document.getElementById("fileResult").textContent = JSON.stringify(res, null, 2);
}
</script>
</body>
</html>
